<template name="details">
  <div class="details">
    {{> yield 'header' }}
    {{> yield 'content' }}
  </div>
</template>

<template name="details_header">
  <nav class="nav">
    <div class="close-button"></div>
  </nav>
  <header>
    <section class="webshot">
      {{#if getWebshotFileName _id }}
        <img src="/webshots/{{ getWebshotFileName _id }}" />
      {{/if}}
    </section>
    <section class="info">
      <div class="title">{{ title }}</div>
      <div class="url">{{ url }}</div>
      <div class="user">added by <strong>{{ getUser createdBy }}</strong></div>
      <div class="description">{{ description }}</div>
      <div class="category tags">
        <header>category: </header>
        <div class="tag">study</div>
      </div>
      {{ > tags }}
      <div class="statistics">
        <div class="date"><strong>added:</strong> {{ timePassed createdOn }}</div>
        {{> visits_counter }}
        <div class="splitter"></div>
        {{> website_votes }}
      </div>
    </section>
  </header>
</template>

<template name="details_content">
  <main class="content wide">
    <section class="comments">
      <header>
        <h4>Comments</h4>
      </header>
      {{> comments_list site=_id }}
      {{#if currentUser }}
        {{> comment_add_form site=_id }}
      {{/if}}
    </section>
    <section class="recommendations">
      {{> recommendations_list site=this }}
    </section>
  </main>
</template>

<template name="recommendations_list">
  {{#each sites}}
    {{#unless @index }}
      <header>
        <h4>You may also like</h4>
      </header>
    {{/unless}}
    <article class="website widget small">
      {{#if getWebshotFileName _id }}
        <img class="background" src="/webshots/{{ getWebshotFileName _id }}" />
      {{/if}}
      <div class="cover">
        {{ > open_website }}
        {{ > open_details }}
        <div class="button secondary pin">
          <span class="glyphicon glyphicon-pushpin"></span>
        </div>
      </div>
      <div class="main">
        <a class="title" href="{{url}}">{{ title }}</a>
      </div>
      <div class="secondary">
        <div class="description">{{description}}</div>
      </div>
      <div class="secondary">
        <div class="description">{{score}}</div>
      </div>
    </article>
  {{/each}}
</template>